<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>乐活基地合作平台</title>
	<link rel="stylesheet" type="text/css" href="css/layout.css" />
	<link rel="stylesheet" type="text/css" href="css/editor.css" />
	<script type="text/javascript" src="scripts/jquery-1.4.2.js"></script>
	<script type="text/javascript">

		function ChangePass(){
			var oldpass = $("#oldpass").val();
			var newpass = $("#newpass").val();
			var newpass2 = $("#newpass2").val();
			
		    var msg = new Array();
			if(oldpass=='') {
			 	msg[0] = '旧密码不能为空！';
			}
			if(newpass=='') {
			 	msg[1] = '新密码不能为空！';
			}else{
				if(! /^[\w_]*$/.test( newpass ) ){
					msg[1] = '密码只能由字母、数字、下划线组成！';
				}
				if(newpass.length<6){
					msg[2] = '密码长度必须大于6个字符！';
				}
				if(newpass.length>20){
					msg[3] = '密码长度必须小于20个字符！';
				}
			}
			
			if(newpass2=='') {
			 	msg[4] = '确认密码不能为空！';
			}else{
				if( newpass2 != newpass ){
					msg[4] = '确认密码与新密码不一致！';
				}
			}
			var err_num = msg.length;
			if(err_num>0){
				var err_msg = '';
				for(var i=0;i<5;i++){
					if(msg[i]){
						err_msg += msg[i]+"\n";
					}
				}
				alert(err_msg);
			}else{
				document.MyForm.submit();
			}
		}
		
	</script>
</head>

<body>
	<div class="header">
		修改密码
	</div>
	<div class="container">
		<form id="MyForm" name="MyForm" method="post" action="./?c=User_update_info">
		<input name="up_type" type="hidden" value="pass">
		<input name="password" id="password" type="hidden" value="{{$arr_form.password}}">
			<div id="tabcontent">
					<table border="0" cellpadding="5" cellspacing="0" class="tableform" width="100%">
						<tr>
							<td align="right" width="100"><span class="need">旧密码：</span></td>
							<td colspan="3"><input name="oldpass" type="password" id="oldpass" maxlength="50" class="tel" value=""/></td>
						</tr>
						<tr>
							<td width="100" align="right" valign="top"><span class="need">新密码：</span></td>
							<td colspan="3"><input name="newpass" type="password" id="newpass" class="tel" />
						    <div style="padding:5px 0;">密码由 6-20 个英文字母、数字或符号组成。为了您的帐户安全，建议使用大小写字母与数字混合设置登录密码</div></td>
						</tr>
						<tr>
							<td align="right" width="100"><span class="need">再输入一次：</span></td>
                            <td><input name="newpass2" type="password" id="newpass2" class="tel" /></td>
						</tr>
					</table>
			
		    </div>
				<table border="0" cellpadding="5" cellspacing="0" class="tableform" width="100%">
					<tr>
						<td width="100" height="40">&nbsp;</td>
						<td>
							<input type="button" id="SubmitBtn" value="确认修改" onclick="ChangePass();"/>
							<input type="reset" value="重置" />
						</td>
					</tr>
				</table>
			<div>
			</div>
		</form>
	</div>
</body>
</html>
